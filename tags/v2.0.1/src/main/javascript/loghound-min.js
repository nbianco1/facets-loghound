var LogHoundVer=[];LogHoundVer.major="2";LogHoundVer.minor="0";LogHoundVer.fix="0";LogHoundVer.build="$Rev$";if(LogHoundVer.build.length>5){LogHoundVer.build=LogHoundVer.build.substring(5).split(" ")[1]}else{LogHoundVer.build="-"}LogHoundVer.release="beta 4";LogHoundVer.getLongText=function(){return this.major+"."+this.minor+"."+this.fix+"."+this.build+" "+this.release};LogHoundVer.getShortText=function(){return"v"+this.major+"."+this.minor+"."+this.fix+" "+this.release};function LogHoundLevel(c,b,a){this.id=c;this.text=b.toLowerCase();this.enabled=a}LogHoundLevel.prototype.getId=function(){return this.id};LogHoundLevel.prototype.getName=function(){return this.text};LogHoundLevel.prototype.isEnabled=function(){return this.enabled};LogHoundLevel.prototype.setEnabled=function(a){this.enabled=a};var LogHoundLevels=[];LogHoundLevels.getByName=function(b){b=b.toLowerCase();for(var a=0;a<this.length;a++){if(this[a].getName()==b){return this[a]}}return null};LogHoundLevels.getById=function(b){for(var a=0;a<this.length;a++){if(this[a].getId()==b){return this[a]}}return null};LogHoundLevels.getLevel=function(a){if(a==null){return null}if((typeof a)=="number"){return this.getById(a)}else{if((a instanceof String)||(typeof a)=="string"){return this.getByName(a)}else{if(!(a instanceof LogHoundLevel)){return null}}}return a};LogHoundLevels.addLevel=function(b){FctsTools.extend(b,LogHoundLevel);var a=new b();LogHoundLevels[a.getName().toUpperCase()]=a;LogHoundLevels.push(a)};function FatalLogHoundLevel(){FatalLogHoundLevel.baseConstructor.call(this,100,"fatal",true)}LogHoundLevels.addLevel(FatalLogHoundLevel);function ErrorLogHoundLevel(){ErrorLogHoundLevel.baseConstructor.call(this,90,"error",true)}LogHoundLevels.addLevel(ErrorLogHoundLevel);function WarnLogHoundLevel(){WarnLogHoundLevel.baseConstructor.call(this,80,"warn",true)}LogHoundLevels.addLevel(WarnLogHoundLevel);function InfoLogHoundLevel(){InfoLogHoundLevel.baseConstructor.call(this,70,"info",true)}LogHoundLevels.addLevel(InfoLogHoundLevel);function DebugLogHoundLevel(){DebugLogHoundLevel.baseConstructor.call(this,60,"debug",true)}LogHoundLevels.addLevel(DebugLogHoundLevel);function TraceLogHoundLevel(){TraceLogHoundLevel.baseConstructor.call(this,50,"trace",true)}LogHoundLevels.addLevel(TraceLogHoundLevel);if((typeof(LogHoundLevelPreload)!="undefined")&&(LogHoundLevelPreload instanceof Array)){for(i=0;i<LogHoundLevelPreload.length;i++){LogHoundLevels.addLevel(LogHoundLevelPreload[i])}}function LogHound(){this.me=this;this.msgCount=0;this.logLevel=LogHoundLevels.DEBUG;this.msgDispMode="brief";this.killSwitch=false;this.enabled=true;this.initialised=false;this.helpEnabled=false;this.tagNameRegex=new RegExp("^[a-z][-a-z0-9_]+$","i")}LogHound.prototype.doSetup=function(){if(this.killSwitch){return}this.tagMode="any";this.killSwitch=true;this.initialised=true;this.helpEntries=[];this.msgRecords=[];this.msgTags=[];this.msgFilters=[];this.msgFilters.push(new LogHoundMessageLevelFilter());var f=document.createElement("DIV");f.setAttribute("id","lhPlate");f.setAttribute("class","lhRndCorners");this.logPlate=document.body.appendChild(f);this.logPlate.lhIsShowing=true;this.logPlateHead=document.createElement("DIV");this.logPlateHead.setAttribute("id","lhPlateHead");if(document.all){var g=document.createAttribute("class");g.value="lhPlateColor lhRndCorners";this.logPlateHead.setAttributeNode(g)}else{this.logPlateHead.setAttribute("class","lhPlateColor lhRndCorners")}var k='<table width="100%" border="0" cellspacing="0" cellpadding="0"><tr>';k+='<td><span id="lhBtnShade" class="lhBtnShade lhFont lhCtrl lhBtn" title="Toggle Message Panel">v</span></td>';k+='<td class="lhTitle">Log Hound v'+LogHoundVer.getLongText()+"</td>";k+='<td><span id="lhBtnHelp" class="lhBtnHelp lhFont lhCtrl lhBtn" title="Toggle Help Panel">?</span></td>';k+='<td><span id="lhBtnTags" class="lhBtnTags lhFont lhCtrl lhBtn" title="Toggle Tags Panel">T</span></td>';k+='<td><span id="lhBtnCtrls" class="lhBtnCtrls lhFont lhCtrl lhBtn" title="Toggle Control Panel">C</span></td>';
k+="</tr></table>";this.logPlateHead.innerHTML=k;this.logPlate.appendChild(this.logPlateHead);this.interfaceBody=document.createElement("DIV");this.interfaceBody.setAttribute("id","lhBoxInterfaceBody");if(document.all){var g=document.createAttribute("class");g.value="lhInterfaceBody";this.interfaceBody.setAttributeNode(g)}else{this.interfaceBody.setAttribute("class","lhInterfaceBody")}this.interfaceBody.style.display="none";this.logPlate.appendChild(this.interfaceBody);this.logPlateHelpPanel=document.createElement("DIV");this.logPlateHelpPanel.setAttribute("id","lhPlateHelpPanel");if(document.all){var g=document.createAttribute("class");g.value="lhPlateColor lhRndCorners lhFont";this.logPlateHelpPanel.setAttributeNode(g)}else{this.logPlateHelpPanel.setAttribute("class","lhPlateColor lhRndCorners lhFont")}var c="Mouse over any interface element to see help for that element here.";this.logPlateHelpPanel.innerHTML=c;this.logPlateHelpPanel.lhDfltTxt=c;this.logPlateHelpPanel.lhPanelState="hide";this.interfaceBody.appendChild(this.logPlateHelpPanel);this.logPlateCtrlPanel=document.createElement("DIV");this.logPlateCtrlPanel.setAttribute("id","lhPlateCtrlPanel");if(document.all){var g=document.createAttribute("class");g.value="lhPlateColor lhRndCorners";this.logPlateCtrlPanel.setAttributeNode(g)}else{this.logPlateCtrlPanel.setAttribute("class","lhPlateColor lhRndCorners")}var n='<table  cellspacing="0"><tr>';n+='<td><span id="lhCtrlMore" class="lhCtrl lhBtn lhFont" title="Show More">v</span></td>';n+='<td><span id="lhCtrlLess" class="lhCtrl lhBtn lhFont" title="Show Less">^</span></td>';n+='<td><div id="lhCtrlLvlSelectPlate"><select id="lhLvlSelect" name="lhLvlSelect" class="lhSmFont"></select></div></td>';n+='<td><div id="lhCtrlLvlPlate">';n+='<span id="lhCtrlLvlFatal" class="lhFatalMsg lhCtrlLvl lhCtrl lhBtn lhFont" title="Fatal">+</span>';n+='<span id="lhCtrlLvlError" class="lhErrorMsg lhCtrlLvl lhCtrl lhBtn lhFont" title="Error">+</span>';n+='<span id="lhCtrlLvlWarn" class="lhWarnMsg lhCtrlLvl lhCtrl lhBtn lhFont" title="Warn">+</span>';n+='<span id="lhCtrlLvlInfo" class="lhInfoMsg lhCtrlLvl lhCtrl lhBtn lhFont" title="Info">+</span>';n+='<span id="lhCtrlLvlDebug" class="lhDebugMsg lhCtrlLvl lhCtrl lhBtn lhFont" title="Debug">+</span>';n+='<span id="lhCtrlLvlTrace" class="lhTraceMsg lhCtrlLvl lhCtrl lhBtn lhFont" title="Trace">+</span>';n+="</div></td>";n+='<td><div id="lhCtrlMsgDispModeBtn" class="lhDispModeLable lhCtrl lhBtn lhSmFont" title="Toggle message display mode">D</div></td>';n+='<td><div id="lhCtrlSearchPlate">';n+='<label for="lhSearchField" class="lhSmFont lhSearchLabel lhCtrl">Search:</label>';n+='<input type="text" id="lhSearchField" name="lhSearchField" class="lhSearchField lhSmFont" onkeyup="window.logHound.search()"/>';n+="</div></td>";n+="</tr></table>";this.logPlateCtrlPanel.innerHTML=n;this.logPlateCtrlPanel.lhPanelState="hide";this.interfaceBody.appendChild(this.logPlateCtrlPanel);this.addHelpEntry(["lhCtrlMore","Show more messages: Lengthens the log message pane to show more messages."]);this.addHelpEntry(["lhCtrlLess","Show less messages: Shortens the log message pane to show fewer messages."]);this.addHelpEntry(["lhSearchField","Search text entry: Message text is matched as you type, with non-matching log messages being automatically hidden."]);this.addHelpEntry(["lhCtrlLvlPlate","Log level visibility controls: Controls which log level messages will be visible in the message pane."]);this.addHelpEntry(["lhCtrlMsgDispModeBtn","Message detail toggle: Toggles the message pane between normal message display and detailed message display."]);this.logPlateTagPanel=document.createElement("DIV");this.logPlateTagPanel.setAttribute("id","lhPlateTagPanel");if(document.all){var g=document.createAttribute("class");g.value="lhPlateColor lhRndCorners";this.logPlateTagPanel.setAttributeNode(g)}else{this.logPlateTagPanel.setAttribute("class","lhPlateColor lhRndCorners")}var o="";o+='<div class="lhShrinkWrap">';o+='<div id="lhAvailTagsPlate">';
o+='<span class="lhSmFont">Tags:</span>';o+='<div><select id="lhAvailTagsSelect" class="lhInput lhSmFont" multiple="multiple" size="4"></select></div>';o+="</div>";o+='<div id="lhCtrlTagsPlate">';o+='<span id="lhTagCtrlAddBtn" class="lhTagCtrl lhBtn lhFont" title="Add Selected">&gt;</span>';o+='<span id="lhTagCtrlAddAllBtn" class="lhTagCtrl lhBtn lhFont" title="Add All">&gt;&gt;</span>';o+='<span id="lhTagCtrlRemBtn" class="lhTagCtrl lhBtn lhFont" title="Remove Selected">&lt;</span>';o+='<span id="lhTagCtrlRemAllBtn" class="lhTagCtrl lhBtn lhFont" title="Remove All">&lt;&lt;</span>';o+="</div>";o+='<div id="lhViewTagsPlate">';o+='<span class="lhSmFont">Viewing:</span>';o+='<div><select id="lhViewTagsSelect" class="lhInput lhSmFont" multiple="multiple" size="4"></select></div>';o+="</div>";o+='<div id="lhModTagsPlate">';o+='<span id="lhTagCtrlAnyBtn" class="lhTagCtrl lhSmFont lhBtn" title="Any">A</span>';o+='<span id="lhTagCtrlIntBtn" class="lhTagCtrl lhSmFont lhBtn" title="Intersection">I</span>';o+='<span id="lhTagCtrlOnyBtn" class="lhTagCtrl lhSmFont lhBtn" title="Only">O</span>';o+='<span id="lhTagCtrlExcBtn" class="lhTagCtrl lhSmFont lhBtn" title="Exclusion">E</span>';o+="</div>";o+="</div>";this.logPlateTagPanel.innerHTML=o;this.logPlateTagPanel.lhPanelState="hide";this.interfaceBody.appendChild(this.logPlateTagPanel);this.addHelpEntry(["lhAvailTagsSelect","Available Tags Select: Lists all unique available tags assigned to any messages."]);this.addHelpEntry(["lhViewTagsSelect","View Tags Select: Tags listed here will affect what messages are visible, depending on the active tag modifier."]);this.addHelpEntry(["lhTagCtrlAddBtn","Add Selected Tags: Moves tags selected in the available tags box to the viewing box."]);this.addHelpEntry(["lhTagCtrlAddAllBtn","Add All Tags: Moves all tags in the available tags box to the viewing box."]);this.addHelpEntry(["lhTagCtrlRemBtn","Remove Selected Tags: Moves tags selected in the viewing tags box to the available tags box."]);this.addHelpEntry(["lhTagCtrlRemAllBtn","Remove All Tags: Moves all tags in the viewing tags box back to the available tags box."]);this.logPlateBodyBox=document.createElement("DIV");this.logPlateBodyBox.setAttribute("id","lhPlateBodyBox");if(document.all){var g=document.createAttribute("class");g.value="lhPlateColor lhRndCorners";this.logPlateBodyBox.setAttributeNode(g)}else{this.logPlateBodyBox.setAttribute("class","lhPlateColor lhRndCorners")}this.interfaceBody.appendChild(this.logPlateBodyBox);this.logPlateBody=document.createElement("DIV");this.logPlateBody.setAttribute("id","lhPlateBody");this.logPlateBodyBox.appendChild(this.logPlateBody);var a=document.getElementById("lhLvlSelect");var b;for(var m=0;m<LogHoundLevels.length;m++){b=LogHoundLevels[m];a.options[a.length]=new Option(b.getName(),b.getId())}FctsTools.sortOptionsByValue(a,function(q,p){return parseInt(p,10)-parseInt(q,10)});document.getElementById("lhLvlSelect").onchange=function(p){window.logHound.setLogLevel(parseInt(this.value,10))};this.addHelpEntry(["lhLvlSelect","Level Select: Levels are in descending order. Only messages corresponding to the level shown and those above will be logged after change."]);var e=document.getElementsByClassName("lhBtn");for(i=0;i<e.length;i++){FctsTools.addStyleClass(e[i],"lhBtnOut")}for(i=0;i<e.length;i++){e[i].onmouseover=this.buttonMouseOver;e[i].onmouseout=this.buttonMouseOut;e[i].lhBtnState="off"}document.getElementById("lhTagCtrlAddBtn").onclick=function(p){window.logHound.moveTagAssignments("add")};document.getElementById("lhTagCtrlRemBtn").onclick=function(p){window.logHound.moveTagAssignments("rem")};document.getElementById("lhTagCtrlRemAllBtn").onclick=function(p){window.logHound.moveTagAssignments("remAll")};document.getElementById("lhTagCtrlAddAllBtn").onclick=function(p){window.logHound.moveTagAssignments("addAll")};document.getElementById("lhCtrlMore").onclick=function(p){window.logHound.adjustMessagePaneSize(true)};document.getElementById("lhCtrlLess").onclick=function(p){window.logHound.adjustMessagePaneSize(false)
};var d=document.getElementsByClassName("lhCtrlLvl");var h=function(p){window.logHound.showMessageLevel(this.id.slice(9))};for(var m=0;m<d.length;m++){d[m].onclick=h}document.getElementById("lhBtnShade").onclick=function(p){window.logHound.setShadeMode()};this.addHelpEntry(["lhBtnShade","Shade Mode Toggle: Toggles the Log Hound interface between shade display mode and normal display mode."]);document.getElementById("lhBtnHelp").onclick=function(p){window.logHound.toggleHelpPanel("toggle")};this.addHelpEntry(["lhBtnHelp","Help Panel Toggle: Opens and closes the help panel."]);var l=document.getElementById("lhBtnCtrls");l.onclick=function(p){window.logHound.toggleCtrlPanel("toggle")};this.addHelpEntry(["lhBtnCtrls","Control Panel Toggle: Opens and closes the control panel."]);document.getElementById("lhBtnTags").onclick=function(p){window.logHound.toggleTagCtrlPanel("toggle")};this.addHelpEntry(["lhBtnTags","Tag Panel Toggle: Opens and closes the tag control panel."]);this.tagModBtns=[];this.tagModBtnAny=document.getElementById("lhTagCtrlAnyBtn");this.tagModBtns[this.tagModBtns.length]=this.tagModBtnAny;this.tagModBtnAny.lhTagMode="any";this.tagModBtnAny.onclick=function(p){window.logHound.activateTagMode("any")};this.addHelpEntry(["lhTagCtrlAnyBtn",'"Any" Tags Modifier: Messages with any of the viewing tags will be visible.']);this.tagModBtnInt=document.getElementById("lhTagCtrlIntBtn");this.tagModBtns[this.tagModBtns.length]=this.tagModBtnInt;this.tagModBtnInt.lhTagMode="int";this.tagModBtnInt.onclick=function(p){window.logHound.activateTagMode("int")};this.addHelpEntry(["lhTagCtrlIntBtn",'"Intersection" Tags Modifier: Only messages that have all of the viewing tags will be visible.']);this.tagModBtnOny=document.getElementById("lhTagCtrlOnyBtn");this.tagModBtns[this.tagModBtns.length]=this.tagModBtnOny;this.tagModBtnOny.lhTagMode="ony";this.tagModBtnOny.onclick=function(p){window.logHound.activateTagMode("ony")};this.addHelpEntry(["lhTagCtrlOnyBtn",'"Only" Tags Modifier: Only messages that have all of the viewing tags and no other tags will be visible.']);this.tagModBtnExc=document.getElementById("lhTagCtrlExcBtn");this.tagModBtns[this.tagModBtns.length]=this.tagModBtnExc;this.tagModBtnExc.lhTagMode="exc";this.tagModBtnExc.onclick=function(p){window.logHound.activateTagMode("exc")};this.addHelpEntry(["lhTagCtrlExcBtn",'"Exclusion" Tags Modifier: Only messages that have none of the viewing tags will be visible.']);document.getElementById("lhCtrlMsgDispModeBtn").onclick=function(p){window.logHound.setMessageLayout()};this.searchField=document.getElementById("lhSearchField");this.activateTagMode("any");this.adjustPlateSize();this.interfaceMonitor(true);this.setLogLevel(this.logLevel);setTimeout("window.logHound.show(true)",800);this.logInfo("Log Hound is online...")};LogHound.prototype.buttonMouseOver=function(a){FctsTools.removeStyleClass(this,"lhBtnOut");FctsTools.removeStyleClass(this,"lhBtnOn");FctsTools.addStyleClass(this,"lhBtnOver")};LogHound.prototype.buttonMouseOut=function(a){FctsTools.removeStyleClass(this,"lhBtnOver");if(this.lhBtnState=="on"){FctsTools.addStyleClass(this,"lhBtnOn")}else{FctsTools.replaceStyleClass(this,"lhBtnOn","lhBtnOut")}};LogHound.prototype.activateTagMode=function(b){for(var a=0;a<this.tagModBtns.length;a++){if(this.tagModBtns[a].lhTagMode==b){this.tagModBtns[a].lhBtnState="on";FctsTools.addStyleClass(this.tagModBtns[a],"lhBtnOn");this.setTagFilterMode(b)}else{this.tagModBtns[a].lhBtnState="off";FctsTools.removeStyleClass(this.tagModBtns[a],"lhBtnOn");FctsTools.replaceStyleClass(this.tagModBtns[a],"lhBtnOn","lhBtnOut")}}};LogHound.prototype.addHelpEntry=function(a){this.helpEntries[this.helpEntries.length]=a};LogHound.prototype.toggleHelp=function(a){if(a!=null&&a){if(this.helpEnabled){return}this.helpEnabled=true;var b=null;for(i=0;i<this.helpEntries.length;i++){b=document.getElementById(this.helpEntries[i][0]);b.lhHelpTxt=this.helpEntries[i][1];b.lhOrigMouseOver=b.onmouseover;b.lhOrigMouseOut=b.onmouseout;
b.onmouseover=function(){if((typeof(this.lhOrigMouseOver)!="undefined")&&this.lhOrigMouseOver!=null){this.lhOrigMouseOver()}document.getElementById("lhPlateHelpPanel").innerHTML=this.lhHelpTxt};b.onmouseout=function(){if((typeof(this.lhOrigMouseOut)!="undefined")&&this.lhOrigMouseOut!=null){this.lhOrigMouseOut()}document.getElementById("lhPlateHelpPanel").innerHTML=document.getElementById("lhPlateHelpPanel").lhDfltTxt}}}else{if(!this.helpEnabled){return}this.helpEnabled=false;var b=null;for(i=0;i<this.helpEntries.length;i++){b=document.getElementById(this.helpEntries[i][0]);b.lhHelpTxt=this.helpEntries[i][1];b.onmouseover=b.lhOrigMouseOver;b.onmouseout=b.lhOrigMouseOut}}};LogHound.prototype.setMessageLayout=function(d){if(d==null){this.msgDispMode=(this.msgDispMode=="brief"?"detail":"brief")}else{if((d instanceof String)||((typeof d)=="string")){if(this.msgDispMode==d){return false}if("brief"==d||"detail"==d){this.msgDispMode=d}}else{return false}}if(!this.initialised||!this.enabled){return false}var c=document.getElementsByClassName("lhMsgRecBrief");for(var a=0;a<c.length;a++){c[a].style.display=(this.msgDispMode=="brief"?"":"none")}var b=document.getElementsByClassName("lhMsgRecDetail");for(var a=0;a<b.length;a++){b[a].style.display=(this.msgDispMode=="brief"?"none":"")}return true};LogHound.prototype.getMessageLayout=function(){return this.msgDispMode};LogHound.prototype.setTagFilterMode=function(b){this.tagMode=((b!="any"&&b!="int"&&b!="exc"&&b!="ony")?"any":b);var a=document.getElementById("lhViewTagsSelect");this.addMsgFilter(new LogHoundMessageTagFilter(FctsTools.getOptionValues(a),this.tagMode));this.applyMsgFilters()};LogHound.prototype.setKillSwitch=function(a){if(a!=null&&a==false){this.killSwitch=false}else{this.killSwitch=true}};LogHound.prototype.enableLogging=function(a){if(!this.initialised){return false}if(a!=null&&a==false){this.enabled=false}else{this.enabled=true}};LogHound.prototype.isLoggingEnabled=function(){return this.enabled};LogHound.prototype.show=function(a){if(!this.initialised||!this.enabled){return}a=FctsTools.parseToBool(a,["show"]);if(a==null){a=!this.logPlate.lhIsShowing}if(a){this.logPlate.lhIsShowing=true;this.logPlate.style.display="block";this.interfaceMonitor("start");this.adjustPlateSize()}else{this.logPlate.lhIsShowing=false;this.interfaceMonitor("stop");this.logPlate.style.display="none"}};LogHound.prototype.isShowing=function(){return this.logPlate.lhIsShowing};LogHound.prototype.getLogLevel=function(){return this.logLevel};LogHound.prototype.setLogLevel=function(c){c=LogHoundLevels.getLevel(c);if(c==null){return}this.logLevel=c;if(!this.initialised||!this.enabled){return false}var b=document.getElementById("lhLvlSelect");if(c.getId()!=b.options[b.selectedIndex].value){for(var a=0;a<b.options.length;a++){if(c.getId()==b.options[a].value){b.selectedIndex=a}}}};LogHound.prototype.interfaceMonitor=function(a){if(!this.initialised||!this.enabled){return}a=FctsTools.parseToBool(a,["start"]);if(a==null){a=(this.debugWindowMonitorRef==null)}if(a){this.debugWindowMonitorRef=setInterval("window.logHound.stickLogPlateTopRight()",500)}else{clearInterval(this.debugWindowMonitorRef);this.debugWindowMonitorRef=null}};LogHound.prototype.showMessageLevel=function(d,a){var c=null;if((typeof d)=="number"||(d instanceof String)||((typeof d)=="string")){c=LogHoundLevels.getLevel(d)}else{if(d instanceof LogHoundLevel){c=d}else{return false}}a=FctsTools.parseToBool(a,["show"]);var b=document.getElementById("lhCtrlLvl"+FctsTools.capitaliseFirstLetter(c.getName()));a=(a==null?!(b.innerHTML=="+"):a);if(!a){b.innerHTML="&ndash;";c.setEnabled(false)}else{b.innerHTML="+";c.setEnabled(true)}this.applyMsgFilters()};LogHound.prototype.addMsgFilter=function(c){if(!c.getId||!(c instanceof LogHoundMessageFilter)){alert("Argumented object is not a LogHoundMessageFilter.");return}var b=[];var a=null;for(i=0;i<this.msgFilters.length;i++){a=this.msgFilters[i];if(a.getId()!=c.getId()){b.push(a)}}this.msgFilters=b;this.msgFilters.push(c)
};LogHound.prototype.applyMsgFilters=function(){for(recIdx=0;recIdx<this.msgRecords.length;recIdx++){this.msgRecords[recIdx]["element"].style.display=(this.filterMsg(this.msgRecords[recIdx])?"block":"none")}};LogHound.prototype.filterMsg=function(a){for(idx=0;idx<this.msgFilters.length;idx++){if(!this.msgFilters[idx].showMessage(a)){return false}}return true};LogHound.prototype.setShadeMode=function(a){if(!this.initialised||!this.enabled){return}var b=document.getElementById("lhBtnShade");a=FctsTools.parseToBool(a);a=(a==null?this.interfaceBody.style.display=="block":a);if(a){this.interfaceBody.style.display="none";this.logPlate.style.height=this.logPlateHead.offsetHeight;b.innerHTML="v"}else{this.interfaceBody.style.display="block";this.adjustPlateSize();b.innerHTML="^"}};LogHound.prototype.isShaded=function(){return this.interfaceBody.style.display=="none"};LogHound.prototype.toggleHelpPanel=function(a){if(a=="restore"){a=this.logPlateHelpPanel.lhPanelState}else{if(a=="toggle"){a=(this.logPlateHelpPanel.lhPanelState=="hide"?"display":"hide")}}if(a=="display"){this.logPlateHelpPanel.innerHTML=this.logPlateHelpPanel.lhDfltTxt;this.logPlateHelpPanel.style.display="block";this.logPlateHelpPanel.lhPanelState="display";this.toggleHelp(true)}else{this.logPlateHelpPanel.style.display="none";this.logPlateHelpPanel.lhPanelState="hide";this.toggleHelp(false)}this.adjustPlateSize()};LogHound.prototype.toggleCtrlPanel=function(a){if(a=="restore"){a=this.logPlateCtrlPanel.lhPanelState}else{if(a=="toggle"){a=(this.logPlateCtrlPanel.lhPanelState=="hide"?"display":"hide")}}if(a=="display"){this.logPlateCtrlPanel.style.display="block";this.logPlateCtrlPanel.lhPanelState="display"}else{this.logPlateCtrlPanel.style.display="none";this.logPlateCtrlPanel.lhPanelState="hide"}this.adjustPlateSize()};LogHound.prototype.toggleTagCtrlPanel=function(a){if(a=="restore"){a=this.logPlateTagPanel.lhPanelState}else{if(a=="toggle"){a=(this.logPlateTagPanel.lhPanelState=="hide"?"display":"hide")}}if(a=="display"){this.logPlateTagPanel.style.display="block";this.logPlateTagPanel.lhPanelState="display"}else{this.logPlateTagPanel.style.display="none";this.logPlateTagPanel.lhPanelState="hide"}this.adjustPlateSize()};LogHound.prototype.adjustMessagePaneSize=function(a){if(!this.initialised||!this.enabled){return}if((typeof a)==="boolean"){a=(a?75:-75)}else{if((a instanceof String)||((typeof a)=="string")){a=FctsTools.parseToBool(a,["more"]);a=(a?75:-75)}else{if((typeof a)==="number"){}else{return false}}}return this.setMessagePaneSize(this.logPlateBodyBox.offsetHeight+a)};LogHound.prototype.setMessagePaneSize=function(b){if(!this.initialised||!this.enabled){return}if((typeof b)!=="number"){return false}var a=this.logPlateBodyBox.offsetHeight;if(a==b||b>600||b<75){return false}this.logPlateBodyBox.style.height=b;this.adjustPlateSize()};LogHound.prototype.adjustPlateSize=function(){this.logPlate.offsetHeight;var a=this.logPlateHead.offsetHeight;a+=this.logPlateHelpPanel.offsetHeight;a+=this.logPlateCtrlPanel.offsetHeight;a+=this.logPlateTagPanel.offsetHeight;a+=this.logPlateBodyBox.offsetHeight;this.logPlate.style.height=a};LogHound.prototype.stickLogPlateTopLeft=function(){var a=$(window).scrollTop();this.logPlate.style.left=0;this.logPlate.style.top=(0+a);this.logPlate.style.zIndex=500};LogHound.prototype.stickLogPlateTopRight=function(){var d=this.logPlate.offsetHeight;var a=this.logPlate.offsetWidth;var c=FctsTools.windowHeight();var b=FctsTools.windowWidth();var e=FctsTools.scrollTop();var f=FctsTools.scrollLeft();this.logPlate.style.left=(FctsTools.viewWidth()-a+f);this.logPlate.style.top=(e);this.logPlate.style.zIndex=500};LogHound.prototype.stickLogPlateBottomLeft=function(){var b=this.logPlate.offsetHeight;var a=FctsTools.windowHeight();var c=FctsTools.scrollTop();this.logPlate.style.left=0;this.logPlate.style.top=(a-b+c);this.logPlate.style.zIndex=500};LogHound.prototype.search=function(b){if(FctsTools.isBlank(b)){b=this.searchField.value}else{this.searchField.value=b
}if(FctsTools.isBlank(b)){b=""}b=FctsTools.escapeRegex(b);var a=new LogHoundTextSearchFilter(b);this.addMsgFilter(a);this.applyMsgFilters()};LogHound.prototype.addTags=function(b){if(b==null||!b.length||b.length<1){return true}for(i=0;i<b.length;i++){if(!(this.tagNameRegex.test(b[i]))){return false}}var a=document.getElementById("lhAvailTagsSelect");foundMatch:for(i=0;i<b.length;i++){for(j=0;j<this.msgTags.length;j++){if(b[i].toLowerCase()==this.msgTags[j].toLowerCase()){continue foundMatch}}if(FctsTools.isBlank(b[i])){continue}this.msgTags.push(b[i]);a.options[a.length]=new Option(b[i],b[i])}FctsTools.sortOptionsByText(a);return true};LogHound.prototype.logTrace=function(){this.log(LogHoundLevels.TRACE,arguments)};LogHound.prototype.logDebug=function(){this.log(LogHoundLevels.DEBUG,arguments)};LogHound.prototype.logInfo=function(){this.log(LogHoundLevels.INFO,arguments)};LogHound.prototype.logWarn=function(){this.log(LogHoundLevels.WARN,arguments)};LogHound.prototype.logError=function(){this.log(LogHoundLevels.ERROR,arguments)};LogHound.prototype.logFatal=function(){this.log(LogHoundLevels.FATAL,arguments)};LogHound.prototype.parseLoggingArgs=function(){var c=[];for(var e=0;e<arguments.length;e++){c[e]=arguments[e]}var d=[];for(var e=0;e<c.length;e++){if(c[e]==null){continue}if((typeof c[e])=="object"&&!(c[e] instanceof Array)&&c[e].length){for(var b=0;b<c[e].length;b++){c[c.length]=c[e][b]}}else{if(c[e] instanceof Array){d.tags=c[e];var f=[];for(var a=0;a<d.tags.length;a++){if(!FctsTools.isBlank(d.tags[a])){f[f.length]=d.tags[a]}}d.tags=f}else{if(c[e] instanceof LogHoundLevel){d.level=c[e]}else{if(c[e] instanceof String||(typeof c[e])==="string"){d.text=c[e]}else{if(c[e] instanceof Error){d.error=c[e]}}}}}}return d};LogHound.prototype.log=function(){if(!this.initialised||!this.enabled){return false}var m=this.parseLoggingArgs(arguments);m.tags=(m.tags==null?{}:m.tags);m.timestamp=new Date();if(m.level==null||this.logLevel.getId()>m.level.getId()){return false}if(FctsTools.isBlank(m.text)){return false}if(!this.addTags(m.tags)){return false}m.number=this.msgCount;this.msgRecords.push(m);this.msgCount++;var n=document.createElement("DIV");var h=FctsTools.capitaliseFirstLetter(m.level.getName());var c="logmsg"+m.number;n.setAttribute("id",c);n.setAttribute("class","lh"+h+"Msg logMsg");n.setAttribute("className","lh"+h+"Msg logMsg");n.setAttribute("lhLogLevel",m.level.getName());n.style.display=(m.level.isEnabled()==true?"block":"none");var l=m.text;if(m.error!=null){l+="<br/><hr/>";l+="Error: "+m.error.name+" at line "+m.error.lineNumber+"<br/>";l+="Message: "+m.error.message+"<br/>";if(m.error.stack!=null){l+="Stack:<br/>"+m.error.stack.replace("\n","<br/>")}}var d=((this.msgDispMode=="detail")?"block":"none");var g='<div id="lhMsgDetail_'+m.number+'" class="lhMsgRecDetail" style="display:'+d+';">';g+='<div class="lhMsgNum2 lhMsgElmt lhSmFont">'+m.number+"</div>";g+='<div class="lhMsgLvl2 lhMsgElmt lhSmFont">'+m.level.getName()+"</div>";g+='<div class="lhMsgTime2 lhMsgElmt lhSmFont">'+this.getTimestampText(m.timestamp)+"</div>";g+='<div class="lhMsgTags2 lhMsgElmt lhSmFont">'+((m.tags instanceof Array)?m.tags:"")+"</div>";g+='<div class="lhMsgTxtFull2 lhMsgElmt lhFont">'+l+"</div>";g+="</div>";var e=((this.msgDispMode=="brief")?"block":"none");var a='<table cellspacing="0" id="lhMsgBrief_'+m.number+'" class="lhMsgRecBrief" style="display:'+e+'"><tr>';a+='<td class="lhMsgNum lhMsgElmt lhSmFont">'+m.number+"</td>";a+='<td class="lhMsgTime lhMsgElmt lhSmFont">'+this.getTimestampText(m.timestamp)+"</td>";a+='<td class="lhMsgTxt lhMsgElmt lhSmFont">'+l+"</td>";a+="</tr></table>";n.innerHTML=g+a;var b=this.logPlateBody.childNodes;if(b==null||b.length<1){this.logPlateBody.appendChild(n)}else{this.logPlateBody.insertBefore(n,b[0])}var f="lhMsg"+((this.msgDispMode=="detail")?"Detail":"Brief")+"_"+m.number;var k=document.getElementById(f);k.style.display="none";k.style.display="";m.element=document.getElementById(c);return true};LogHound.prototype.getTimestampText=function(e){var a=e.getHours();
var f=e.getMinutes();var b=e.getSeconds();var c=e.getMilliseconds();var d=((a<10)?"0"+a:a)+":";d+=((f<10)?"0"+f:f)+":";d+=((b<10)?"0"+b:b)+".";d+=((c<10)?"00"+c:((c<100)?"0"+c:c));return d};LogHound.prototype.moveTagAssignments=function(c){var a=document.getElementById("lhAvailTagsSelect");var b=document.getElementById("lhViewTagsSelect");if(c=="add"){if(a.options.length<1||a.selectedIndex<0){return}FctsTools.moveSelected(a,b)}else{if(c=="addAll"){if(a.options.length<1){return}FctsTools.moveAllOptions(a,b)}else{if(c=="rem"){if(b.options.length<1||b.selectedIndex<0){return}FctsTools.moveSelected(b,a)}else{if(c=="remAll"){if(b.options.length<1){return}FctsTools.moveAllOptions(b,a)}}}}FctsTools.sortOptionsByText(a);FctsTools.sortOptionsByText(b);this.addMsgFilter(new LogHoundMessageTagFilter(FctsTools.getOptionValues(b),this.tagMode));this.applyMsgFilters()};LogHound.prototype.getViewTags=function(){return FctsTools.getOptionValues(document.getElementById("lhViewTagsSelect"))};LogHound.prototype.getAvailTags=function(){return FctsTools.getOptionValues(document.getElementById("lhAvailTagsSelect"))};function LogHoundMessageFilter(a){if(FctsTools.isBlank(a)){throw new Error("Message filter ID cannot be blank.")}this.id=a}LogHoundMessageFilter.prototype.getId=function(){return this.id};LogHoundMessageFilter.prototype.showMessage=function(a){return true};function LogHoundMessageTagFilter(a,b){LogHoundMessageTagFilter.baseConstructor.call(this,"lhMsgTagFilter");this.tagz=a;this.tagMode=((b==null||b=="")?"any":b)}FctsTools.extend(LogHoundMessageTagFilter,LogHoundMessageFilter);LogHoundMessageTagFilter.prototype.showMessage=function(c){if(this.tagz==null||this.tagz.length<1){return true}if(this.tagMode=="int"){if(!(c.tags instanceof Array)){return false}if(c.tags.length<this.tagz.length){return false}}if(this.tagMode=="ony"){if(c.tags.length!=this.tagz.length){return false}}var a=false;var e=false;for(var d=0;d<this.tagz.length;d++){e=false;for(var b=0;b<c.tags.length;b++){a=(c.tags[b].toLowerCase()==this.tagz[d].toLowerCase());if(this.tagMode=="int"||this.tagMode=="ony"){e=(e||a)}else{if(a&&this.tagMode=="any"){return true}else{if(a&&this.tagMode=="exc"){return false}}}}if((this.tagMode=="int"||this.tagMode=="ony")&&!e){return false}}return(this.tagMode=="exc"||this.tagMode=="int"||this.tagMode=="ony")};LogHoundMessageTagFilter.prototype.hasTag=function(a,c){for(var b=0;b<c.length;b++){if(c[tagIdx]==a){return true}}return false};function LogHoundTextSearchFilter(a){LogHoundTextSearchFilter.baseConstructor.call(this,"lhTxtSearchFilter");this.searchText=a;this.regex=new RegExp(a,"i")}FctsTools.extend(LogHoundTextSearchFilter,LogHoundMessageFilter);LogHoundTextSearchFilter.prototype.showMessage=function(a){if(this.searchText==""){return true}return a.text.search(this.regex)>=0};function LogHoundMessageLevelFilter(){LogHoundTextSearchFilter.baseConstructor.call(this,"lhMsgLvlFilter")}FctsTools.extend(LogHoundMessageLevelFilter,LogHoundMessageFilter);LogHoundMessageLevelFilter.prototype.showMessage=function(a){return a.level.isEnabled()};if(window.logHound==null){window.logHound=new LogHound()};